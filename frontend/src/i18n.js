import { ref } from 'vue'

// Syncronitza amb la clau que fa servir la landing page
const _lang = ref(localStorage.getItem('dispatch_lang') || 'ca')

export const LANG_LOCALE = {
  ca: 'ca-AD', es: 'es-ES', fr: 'fr-FR', en: 'en-GB',
}

const messages = {
  ca: {
    // Header
    'nav.emergency':      'EmergÃ¨ncia',
    'nav.history':        'Historial',
    'nav.scenarios':      'Escenaris',
    'nav.users':          'Usuaris',
    'btn.home':           'Inici',
    'btn.logout':         'Sortir',
    // Login
    'login.subtitle':     'Sistema de simulaciÃ³ Â· Andorra',
    'login.username':     "Nom d'usuari",
    'login.username_ph':  'usuari',
    'login.password':     'Contrasenya',
    'login.submit':       'Accedir',
    'login.loading':      'Accedint...',
    'login.back':         'Tornar a la pÃ gina principal',
    'login.conn_error':   'Error de connexiÃ³',
    // Chat
    'chat.no_incident':   'Selecciona o crea un incident',
    'chat.no_incident_sub': "L'alertant respondrÃ  les teves preguntes",
    'chat.call_active':   'En curs',
    'chat.call_ended':    'Finalitzada',
    'chat.end_call':      'Finalitzar Trucada',
    'chat.ending':        'â³ Finalitzant...',
    'chat.call_finished': 'âœ“ Trucada finalitzada',
    'chat.empty':         "Inicia una nova emergÃ¨ncia per\ncomenÃ§ar la simulaciÃ³",
    'chat.caller_label':  'ðŸ“ž Alertant',
    'chat.input_ph':      "Escriu el missatge de l'operador...",
    'chat.send':          'Enviar â†©',
    // Fitxa
    'fitxa.title':        'ðŸ“‹ Fitxa de Dades',
    'fitxa.subtitle':     'Omple durant la trucada',
    'fitxa.address':      'ðŸ“ AdreÃ§a exacta',
    'fitxa.address_ph':   'Carrer, nÃºmero, pis...',
    'fitxa.phone':        'ðŸ“ž TelÃ¨fon de contacte',
    'fitxa.phone_ph':     '+376 ...',
    'fitxa.injured':      'ðŸš‘ Nombre de ferits',
    'fitxa.risks':        'âš ï¸ Riscos addicionals',
    'fitxa.notes':        "ðŸ“ Notes de l'operador",
    'fitxa.notes_ph':     'Observacions, detalls rellevants...',
    'fitxa.save':         'ðŸ’¾ Finalitzar i Guardar IntervenciÃ³',
    'fitxa.saving':       'â³ Guardant...',
    'fitxa.saved':        'âœ“ IntervenciÃ³ guardada correctament',
    'fitxa.error':        'âœ— Error en guardar la fitxa',
    // Emergency panel
    'ep.scenario':        'Escenari base',
    'ep.free':            'â€” EmergÃ¨ncia lliure â€”',
    'ep.details':         "Detalls de l'incident",
    'ep.type':            "Tipus d'incident",
    'ep.location':        'LocalitzaciÃ³',
    'ep.location_ph':     'Carrer, municipi...',
    'ep.description':     'DescripciÃ³ breu',
    'ep.desc_ph':         'Detalls inicials...',
    'ep.priority':        'Prioritat',
    'ep.start':           'ðŸš¨ Iniciar Nova EmergÃ¨ncia',
    'ep.starting':        'â³ Creant...',
    'ep.session':         'Incidents de la sessiÃ³',
    // History panel
    'hp.filters':         'Filtres',
    'hp.all':             'Totes',
    'hp.search_ph':       'Cerca per tipus o escenari...',
    'hp.delete_sel':      'Eliminar sel. ({n})',
    'hp.delete_sel_empty':'Eliminar sel.',
    'hp.delete_all':      'Tot',
    'hp.loading':         'Carregant...',
    'hp.error':           "Error carregant l'historial",
    'hp.empty':           'Cap intervenciÃ³ trobada',
    'hp.open_debriefing': 'ðŸ“Š Obrir debriefing',
    'hp.confirm_del_one': "Eliminar l'historial #{id}?",
    'hp.confirm_del_sel': "Eliminar {n} historial{s}?",
    'hp.confirm_del_all': "Eliminar tot l'historial ({n} entrada{s})?\nAquesta acciÃ³ no es pot desfer.",
    'hp.alert_error':     "Error eliminant l'historial",
    'hp.plural_s':        's',
    // Debriefing modal
    'dm.ended':           'Finalitzada',
    'dm.close':           'âœ• Tancar',
    'dm.transcript':      'ðŸ’¬ TranscripciÃ³ de la trucada',
    'dm.loading':         'Carregant...',
    'dm.error':           'Error carregant el debriefing',
    'dm.no_messages':     'Sense missatges',
    'dm.operator':        'ðŸ‘® Operador',
    'dm.caller':          'ðŸ“ž Alertant',
    'dm.metrics':         'â± MÃ¨triques',
    'dm.duration':        'Durada total',
    'dm.duration_sub':    'call_start â†’ call_end',
    'dm.response':        '1a resposta',
    'dm.response_sub':    'fins al 1r missatge',
    'dm.msg_count':       'Missatges',
    'dm.priority':        'Prioritat',
    'dm.call_start':      'Inici de trucada',
    'dm.scenario':        'Escenari base',
    'dm.free_emergency':  'â€” EmergÃ¨ncia lliure â€”',
    'dm.data_sheet':      'ðŸ“‹ Fitxa de Dades',
    'dm.no_sheet':        'Sense fitxa',
    'dm.address':         'ðŸ“ AdreÃ§a',
    'dm.phone':           'ðŸ“ž TelÃ¨fon',
    'dm.injured':         'ðŸš‘ Ferits',
    'dm.risks':           'âš ï¸ Riscos',
    'dm.notes':           'ðŸ“ Notes',
    'dm.saved':           'Guardat:',
    // Incident types
    'type.Incendio':            'ðŸ”¥ Incendi',
    'type.Incendi forestal':    'ðŸŒ² Incendi forestal',
    'type.Accidente':           'ðŸš— Accident de trÃ nsit',
    'type.InundaciÃ³':           'ðŸ’§ InundaciÃ³',
    'type.EmergÃ¨ncia mÃ¨dica':   'ðŸ¥ EmergÃ¨ncia mÃ¨dica',
    'type.Allau':               'â„ï¸ Allau',
    // Risks
    'risk.Gas':         'ðŸ”´ Gas',
    'risk.Electricitat':'âš¡ Electricitat',
    'risk.QuÃ­mics':     'â˜¢ï¸ QuÃ­mics',
    'risk.Estructural': 'ðŸ—ï¸ Estructural',
    'risk.Explosius':   'ðŸ’¥ Explosius',
    'risk.Biohazard':   'ðŸ¦  Biohazard',
    // Victim status & initial emotion (display labels; values in DB stay in Spanish)
    'vs.Consciente':    'Conscient',
    'vs.Inconsciente':  'Inconscient',
    'vs.GASP':          'GASP',
    'ie.Calma':         'Calma',
    'ie.PÃ¡nico':        'PÃ nic',
    'ie.AgresiÃ³n':      'AgressiÃ³',
    // Role labels
    'role.admin':    'ðŸ”‘ Admin',
    'role.formador': 'ðŸŽ“ Formador',
    'role.operador': 'ðŸ‘® Operador',
    // ScenarioEditor
    'se.title':           'Nou escenari de simulaciÃ³',
    'se.subtitle':        "Defineix el context visible per a l'operador i les instruccions secretes que guiaran la IA",
    'se.banner':          'ðŸ”’ Zona del formador Â· Les instruccions IA no les veu mai l\'operador',
    'se.title_label':     "TÃ­tol de l'escenari",
    'se.title_ph':        'Ex: Incendi en habitatge amb vÃ­ctima atrapada',
    'se.inc_type':        "Tipus d'incident",
    'se.base_loc':        'LocalitzaciÃ³ base',
    'se.base_loc_ph':     'Ex: Andorra la Vella',
    'se.exact_addr':      'AdreÃ§a exacta',
    'se.exact_addr_ph':   'Ex: Carrer Major 15, 2n pis',
    'se.victim':          'Estat de la vÃ­ctima',
    'se.emotion':         "EmociÃ³ inicial de l'alertant",
    'se.victim_stable':   'â— Estable',
    'se.victim_critical': 'â— CrÃ­tic',
    'se.victim_gasp':     'â— Parada respiratÃ²ria',
    'se.emotion_calm':    'â— Cooperatiu',
    'se.emotion_panic':   'â— DifÃ­cil de gestionar',
    'se.emotion_aggr':    'â— Molt difÃ­cil de gestionar',
    'se.instructions':    'ðŸ”’ Instruccions secretes per a la IA',
    'se.instructions_ph': 'Ex: La vÃ­ctima Ã©s un home de 65 anys amb antecedents cardÃ­acs...',
    'se.instructions_hint':'Descriu el comportament de l\'alertant, evoluciÃ³ de l\'incident, dades mÃ¨diques rellevants...',
    'se.success':         'âœ“ Escenari creat correctament',
    'se.creating':        'Creant...',
    'se.create_btn':      '+ Crear Escenari',
    'se.clear_btn':       'Netejar',
    'se.error_required':  'Omple tots els camps obligatoris',
    // ScenariosPanel
    'sp.header':          'ESCENARIS ({n})',
    'sp.empty':           'Cap escenari creat',
    'sp.confirm_delete':  'Eliminar aquest escenari?',
    // UsersPanel
    'up.new_user':        'Nou usuari',
    'up.username':        "Nom d'usuari",
    'up.username_ph':     'MÃ­nim 3 carÃ cters',
    'up.password':        'Contrasenya',
    'up.password_ph':     'MÃ­nim 6 carÃ cters',
    'up.role':            'Rol',
    'up.role_operator':   'Operador',
    'up.role_trainer':    'Formador',
    'up.role_admin':      'Administrador',
    'up.expiry':          'Data de caducitat (opcional)',
    'up.create_btn':      '+ Crear Usuari',
    'up.users_header':    'Usuaris del sistema ({n})',
    'up.refresh':         'â†º Actualitzar',
    'up.empty':           'Cap usuari',
    'up.expired':         'Caducat',
    'up.error_username':  'MÃ­nim 3 carÃ cters',
    'up.error_password':  'MÃ­nim 6 carÃ cters',
    // EditUserModal
    'eu.title_pre':       'Editar usuari:',
    'eu.status':          'Estat',
    'eu.active':          'Actiu',
    'eu.inactive':        'Inactiu',
    'eu.expiry':          'Data de caducitat (opcional)',
    'eu.expiry_hint':     'Deixa buit per eliminar la caducitat',
    'eu.cancel':          'CancelÂ·lar',
    'eu.saving':          'Desant...',
    'eu.save':            'Desar',
  },

  es: {
    'nav.emergency':      'Emergencia',
    'nav.history':        'Historial',
    'nav.scenarios':      'Escenarios',
    'nav.users':          'Usuarios',
    'btn.home':           'Inicio',
    'btn.logout':         'Salir',
    'login.subtitle':     'Sistema de simulaciÃ³n Â· Andorra',
    'login.username':     'Nombre de usuario',
    'login.username_ph':  'usuario',
    'login.password':     'ContraseÃ±a',
    'login.submit':       'Acceder',
    'login.loading':      'Accediendo...',
    'login.back':         'Volver a la pÃ¡gina principal',
    'login.conn_error':   'Error de conexiÃ³n',
    'chat.no_incident':   'Selecciona o crea un incidente',
    'chat.no_incident_sub': 'El alertante responderÃ¡ tus preguntas',
    'chat.call_active':   'En curso',
    'chat.call_ended':    'Finalizada',
    'chat.end_call':      'Finalizar Llamada',
    'chat.ending':        'â³ Finalizando...',
    'chat.call_finished': 'âœ“ Llamada finalizada',
    'chat.empty':         "Inicia una nueva emergencia para\ncomenzar la simulaciÃ³n",
    'chat.caller_label':  'ðŸ“ž Alertante',
    'chat.input_ph':      'Escribe el mensaje del operador...',
    'chat.send':          'Enviar â†©',
    'fitxa.title':        'ðŸ“‹ Ficha de Datos',
    'fitxa.subtitle':     'Rellena durante la llamada',
    'fitxa.address':      'ðŸ“ DirecciÃ³n exacta',
    'fitxa.address_ph':   'Calle, nÃºmero, piso...',
    'fitxa.phone':        'ðŸ“ž TelÃ©fono de contacto',
    'fitxa.phone_ph':     '+376 ...',
    'fitxa.injured':      'ðŸš‘ NÃºmero de heridos',
    'fitxa.risks':        'âš ï¸ Riesgos adicionales',
    'fitxa.notes':        'ðŸ“ Notas del operador',
    'fitxa.notes_ph':     'Observaciones, detalles relevantes...',
    'fitxa.save':         'ðŸ’¾ Finalizar y Guardar IntervenciÃ³n',
    'fitxa.saving':       'â³ Guardando...',
    'fitxa.saved':        'âœ“ IntervenciÃ³n guardada correctamente',
    'fitxa.error':        'âœ— Error al guardar la ficha',
    'ep.scenario':        'Escenario base',
    'ep.free':            'â€” Emergencia libre â€”',
    'ep.details':         'Detalles del incidente',
    'ep.type':            'Tipo de incidente',
    'ep.location':        'LocalizaciÃ³n',
    'ep.location_ph':     'Calle, municipio...',
    'ep.description':     'DescripciÃ³n breve',
    'ep.desc_ph':         'Detalles iniciales...',
    'ep.priority':        'Prioridad',
    'ep.start':           'ðŸš¨ Iniciar Nueva Emergencia',
    'ep.starting':        'â³ Creando...',
    'ep.session':         'Incidentes de la sesiÃ³n',
    'hp.filters':         'Filtros',
    'hp.all':             'Todas',
    'hp.search_ph':       'Busca por tipo o escenario...',
    'hp.delete_sel':      'Eliminar sel. ({n})',
    'hp.delete_sel_empty':'Eliminar sel.',
    'hp.delete_all':      'Todo',
    'hp.loading':         'Cargando...',
    'hp.error':           'Error cargando el historial',
    'hp.empty':           'Ninguna intervenciÃ³n encontrada',
    'hp.open_debriefing': 'ðŸ“Š Abrir debriefing',
    'hp.confirm_del_one': 'Â¿Eliminar el historial #{id}?',
    'hp.confirm_del_sel': 'Â¿Eliminar {n} historial{s}?',
    'hp.confirm_del_all': 'Â¿Eliminar todo el historial ({n} entrada{s})?\nEsta acciÃ³n no se puede deshacer.',
    'hp.alert_error':     'Error al eliminar el historial',
    'hp.plural_s':        'es',
    'dm.ended':           'Finalizada',
    'dm.close':           'âœ• Cerrar',
    'dm.transcript':      'ðŸ’¬ TranscripciÃ³n de la llamada',
    'dm.loading':         'Cargando...',
    'dm.error':           'Error cargando el dÃ©briefing',
    'dm.no_messages':     'Sin mensajes',
    'dm.operator':        'ðŸ‘® Operador',
    'dm.caller':          'ðŸ“ž Alertante',
    'dm.metrics':         'â± MÃ©tricas',
    'dm.duration':        'DuraciÃ³n total',
    'dm.duration_sub':    'call_start â†’ call_end',
    'dm.response':        '1Âª respuesta',
    'dm.response_sub':    'hasta el 1er mensaje',
    'dm.msg_count':       'Mensajes',
    'dm.priority':        'Prioridad',
    'dm.call_start':      'Inicio de llamada',
    'dm.scenario':        'Escenario base',
    'dm.free_emergency':  'â€” Emergencia libre â€”',
    'dm.data_sheet':      'ðŸ“‹ Ficha de Datos',
    'dm.no_sheet':        'Sin ficha',
    'dm.address':         'ðŸ“ DirecciÃ³n',
    'dm.phone':           'ðŸ“ž TelÃ©fono',
    'dm.injured':         'ðŸš‘ Heridos',
    'dm.risks':           'âš ï¸ Riesgos',
    'dm.notes':           'ðŸ“ Notas',
    'dm.saved':           'Guardado:',
    'type.Incendio':          'ðŸ”¥ Incendio',
    'type.Incendi forestal':  'ðŸŒ² Incendio forestal',
    'type.Accidente':         'ðŸš— Accidente de trÃ¡fico',
    'type.InundaciÃ³':         'ðŸ’§ InundaciÃ³n',
    'type.EmergÃ¨ncia mÃ¨dica': 'ðŸ¥ Emergencia mÃ©dica',
    'type.Allau':             'â„ï¸ Avalancha',
    'risk.Gas':         'ðŸ”´ Gas',
    'risk.Electricitat':'âš¡ Electricidad',
    'risk.QuÃ­mics':     'â˜¢ï¸ QuÃ­micos',
    'risk.Estructural': 'ðŸ—ï¸ Estructural',
    'risk.Explosius':   'ðŸ’¥ Explosivos',
    'risk.Biohazard':   'ðŸ¦  Biohazard',
    'vs.Consciente':    'Consciente',
    'vs.Inconsciente':  'Inconsciente',
    'vs.GASP':          'GASP',
    'ie.Calma':         'Calma',
    'ie.PÃ¡nico':        'PÃ¡nico',
    'ie.AgresiÃ³n':      'AgresiÃ³n',
    'role.admin':    'ðŸ”‘ Admin',
    'role.formador': 'ðŸŽ“ Formador',
    'role.operador': 'ðŸ‘® Operador',
    'se.title':           'Nuevo escenario de simulaciÃ³n',
    'se.subtitle':        'Define el contexto visible para el operador y las instrucciones secretas que guiarÃ¡n la IA',
    'se.banner':          'ðŸ”’ Zona del formador Â· Las instrucciones IA nunca las ve el operador',
    'se.title_label':     'TÃ­tulo del escenario',
    'se.title_ph':        'Ej: Incendio en vivienda con vÃ­ctima atrapada',
    'se.inc_type':        'Tipo de incidente',
    'se.base_loc':        'LocalizaciÃ³n base',
    'se.base_loc_ph':     'Ej: Andorra la Vella',
    'se.exact_addr':      'DirecciÃ³n exacta',
    'se.exact_addr_ph':   'Ej: Calle Mayor 15, 2Âº piso',
    'se.victim':          'Estado de la vÃ­ctima',
    'se.emotion':         'EmociÃ³n inicial del alertante',
    'se.victim_stable':   'â— Estable',
    'se.victim_critical': 'â— CrÃ­tico',
    'se.victim_gasp':     'â— Parada respiratoria',
    'se.emotion_calm':    'â— Cooperativo',
    'se.emotion_panic':   'â— DifÃ­cil de gestionar',
    'se.emotion_aggr':    'â— Muy difÃ­cil de gestionar',
    'se.instructions':    'ðŸ”’ Instrucciones secretas para la IA',
    'se.instructions_ph': 'Ej: La vÃ­ctima es un hombre de 65 aÃ±os con antecedentes cardÃ­acos...',
    'se.instructions_hint':'Describe el comportamiento del alertante, evoluciÃ³n del incidente, datos mÃ©dicos relevantes...',
    'se.success':         'âœ“ Escenario creado correctamente',
    'se.creating':        'Creando...',
    'se.create_btn':      '+ Crear Escenario',
    'se.clear_btn':       'Limpiar',
    'se.error_required':  'Rellena todos los campos obligatorios',
    'sp.header':          'ESCENARIOS ({n})',
    'sp.empty':           'NingÃºn escenario creado',
    'sp.confirm_delete':  'Â¿Eliminar este escenario?',
    'up.new_user':        'Nuevo usuario',
    'up.username':        'Nombre de usuario',
    'up.username_ph':     'MÃ­nimo 3 caracteres',
    'up.password':        'ContraseÃ±a',
    'up.password_ph':     'MÃ­nimo 6 caracteres',
    'up.role':            'Rol',
    'up.role_operator':   'Operador',
    'up.role_trainer':    'Formador',
    'up.role_admin':      'Administrador',
    'up.expiry':          'Fecha de caducidad (opcional)',
    'up.create_btn':      '+ Crear Usuario',
    'up.users_header':    'Usuarios del sistema ({n})',
    'up.refresh':         'â†º Actualizar',
    'up.empty':           'NingÃºn usuario',
    'up.expired':         'Caducado',
    'up.error_username':  'MÃ­nimo 3 caracteres',
    'up.error_password':  'MÃ­nimo 6 caracteres',
    'eu.title_pre':       'Editar usuario:',
    'eu.status':          'Estado',
    'eu.active':          'Activo',
    'eu.inactive':        'Inactivo',
    'eu.expiry':          'Fecha de caducidad (opcional)',
    'eu.expiry_hint':     'Deja vacÃ­o para eliminar la caducidad',
    'eu.cancel':          'Cancelar',
    'eu.saving':          'Guardando...',
    'eu.save':            'Guardar',
  },

  fr: {
    'nav.emergency':      'Urgence',
    'nav.history':        'Historique',
    'nav.scenarios':      'ScÃ©narios',
    'nav.users':          'Utilisateurs',
    'btn.home':           'Accueil',
    'btn.logout':         'Quitter',
    'login.subtitle':     'SystÃ¨me de simulation Â· Andorre',
    'login.username':     "Nom d'utilisateur",
    'login.username_ph':  'utilisateur',
    'login.password':     'Mot de passe',
    'login.submit':       'Se connecter',
    'login.loading':      'Connexion...',
    'login.back':         'Retour Ã  la page principale',
    'login.conn_error':   'Erreur de connexion',
    'chat.no_incident':   'SÃ©lectionne ou crÃ©e un incident',
    'chat.no_incident_sub': 'Le demandeur rÃ©pondra Ã  tes questions',
    'chat.call_active':   'En cours',
    'chat.call_ended':    'TerminÃ©e',
    'chat.end_call':      "Terminer l'Appel",
    'chat.ending':        'â³ Fin en cours...',
    'chat.call_finished': 'âœ“ Appel terminÃ©',
    'chat.empty':         "Lance une nouvelle urgence pour\ncommencer la simulation",
    'chat.caller_label':  'ðŸ“ž Demandeur',
    'chat.input_ph':      "Ã‰cris le message de l'opÃ©rateur...",
    'chat.send':          'Envoyer â†©',
    'fitxa.title':        'ðŸ“‹ Fiche de DonnÃ©es',
    'fitxa.subtitle':     "Remplis pendant l'appel",
    'fitxa.address':      'ðŸ“ Adresse exacte',
    'fitxa.address_ph':   'Rue, numÃ©ro, Ã©tage...',
    'fitxa.phone':        'ðŸ“ž TÃ©lÃ©phone de contact',
    'fitxa.phone_ph':     '+376 ...',
    'fitxa.injured':      'ðŸš‘ Nombre de blessÃ©s',
    'fitxa.risks':        'âš ï¸ Risques additionnels',
    'fitxa.notes':        "ðŸ“ Notes de l'opÃ©rateur",
    'fitxa.notes_ph':     'Observations, dÃ©tails pertinents...',
    'fitxa.save':         "ðŸ’¾ Finaliser et Sauvegarder",
    'fitxa.saving':       'â³ Enregistrement...',
    'fitxa.saved':        'âœ“ Intervention sauvegardÃ©e',
    'fitxa.error':        'âœ— Erreur lors de la sauvegarde',
    'ep.scenario':        'ScÃ©nario de base',
    'ep.free':            'â€” Urgence libre â€”',
    'ep.details':         "DÃ©tails de l'incident",
    'ep.type':            "Type d'incident",
    'ep.location':        'Localisation',
    'ep.location_ph':     'Rue, commune...',
    'ep.description':     'Description brÃ¨ve',
    'ep.desc_ph':         'DÃ©tails initiaux...',
    'ep.priority':        'PrioritÃ©',
    'ep.start':           'ðŸš¨ Lancer Nouvelle Urgence',
    'ep.starting':        'â³ CrÃ©ation...',
    'ep.session':         'Incidents de la session',
    'hp.filters':         'Filtres',
    'hp.all':             'Toutes',
    'hp.search_ph':       'Recherche par type ou scÃ©nario...',
    'hp.delete_sel':      'Suppr. sÃ©l. ({n})',
    'hp.delete_sel_empty':'Suppr. sÃ©l.',
    'hp.delete_all':      'Tout',
    'hp.loading':         'Chargement...',
    'hp.error':           'Erreur de chargement',
    'hp.empty':           'Aucune intervention trouvÃ©e',
    'hp.open_debriefing': 'ðŸ“Š Ouvrir le dÃ©briefing',
    'hp.confirm_del_one': "Supprimer l'historique #{id} ?",
    'hp.confirm_del_sel': 'Supprimer {n} historique{s} ?',
    'hp.confirm_del_all': "Supprimer tout l'historique ({n} entrÃ©e{s}) ?\nCette action est irrÃ©versible.",
    'hp.alert_error':     'Erreur lors de la suppression',
    'hp.plural_s':        's',
    'dm.ended':           'TerminÃ©e',
    'dm.close':           'âœ• Fermer',
    'dm.transcript':      "ðŸ’¬ Transcription de l'appel",
    'dm.loading':         'Chargement...',
    'dm.error':           'Erreur de chargement du dÃ©briefing',
    'dm.no_messages':     'Aucun message',
    'dm.operator':        'ðŸ‘® OpÃ©rateur',
    'dm.caller':          'ðŸ“ž Demandeur',
    'dm.metrics':         'â± MÃ©triques',
    'dm.duration':        'DurÃ©e totale',
    'dm.duration_sub':    'call_start â†’ call_end',
    'dm.response':        '1Ã¨re rÃ©ponse',
    'dm.response_sub':    "jusqu'au 1er message",
    'dm.msg_count':       'Messages',
    'dm.priority':        'PrioritÃ©',
    'dm.call_start':      "DÃ©but d'appel",
    'dm.scenario':        'ScÃ©nario de base',
    'dm.free_emergency':  'â€” Urgence libre â€”',
    'dm.data_sheet':      'ðŸ“‹ Fiche de DonnÃ©es',
    'dm.no_sheet':        'Sans fiche',
    'dm.address':         'ðŸ“ Adresse',
    'dm.phone':           'ðŸ“ž TÃ©lÃ©phone',
    'dm.injured':         'ðŸš‘ BlessÃ©s',
    'dm.risks':           'âš ï¸ Risques',
    'dm.notes':           'ðŸ“ Notes',
    'dm.saved':           'SauvegardÃ© :',
    'type.Incendio':          'ðŸ”¥ Incendie',
    'type.Incendi forestal':  'ðŸŒ² Incendie de forÃªt',
    'type.Accidente':         'ðŸš— Accident de la route',
    'type.InundaciÃ³':         'ðŸ’§ Inondation',
    'type.EmergÃ¨ncia mÃ¨dica': 'ðŸ¥ Urgence mÃ©dicale',
    'type.Allau':             'â„ï¸ Avalanche',
    'risk.Gas':         'ðŸ”´ Gaz',
    'risk.Electricitat':'âš¡ Ã‰lectricitÃ©',
    'risk.QuÃ­mics':     'â˜¢ï¸ Produits chimiques',
    'risk.Estructural': 'ðŸ—ï¸ Structurel',
    'risk.Explosius':   'ðŸ’¥ Explosifs',
    'risk.Biohazard':   'ðŸ¦  Biohazard',
    'vs.Consciente':    'Conscient',
    'vs.Inconsciente':  'Inconscient',
    'vs.GASP':          'GASP',
    'ie.Calma':         'Calme',
    'ie.PÃ¡nico':        'Panique',
    'ie.AgresiÃ³n':      'Agression',
    'role.admin':    'ðŸ”‘ Admin',
    'role.formador': 'ðŸŽ“ Formateur',
    'role.operador': 'ðŸ‘® OpÃ©rateur',
    'se.title':           'Nouveau scÃ©nario de simulation',
    'se.subtitle':        "DÃ©finissez le contexte visible pour l'opÃ©rateur et les instructions secrÃ¨tes qui guideront l'IA",
    'se.banner':          "ðŸ”’ Zone du formateur Â· Les instructions IA ne sont jamais vues par l'opÃ©rateur",
    'se.title_label':     'Titre du scÃ©nario',
    'se.title_ph':        "Ex : Incendie dans un logement avec victime piÃ©gÃ©e",
    'se.inc_type':        "Type d'incident",
    'se.base_loc':        'Localisation de base',
    'se.base_loc_ph':     'Ex : Andorre-la-Vieille',
    'se.exact_addr':      'Adresse exacte',
    'se.exact_addr_ph':   "Ex : Rue Major 15, 2e Ã©tage",
    'se.victim':          'Ã‰tat de la victime',
    'se.emotion':         'Ã‰motion initiale du demandeur',
    'se.victim_stable':   'â— Stable',
    'se.victim_critical': 'â— Critique',
    'se.victim_gasp':     'â— ArrÃªt respiratoire',
    'se.emotion_calm':    'â— CoopÃ©ratif',
    'se.emotion_panic':   'â— Difficile Ã  gÃ©rer',
    'se.emotion_aggr':    'â— TrÃ¨s difficile Ã  gÃ©rer',
    'se.instructions':    "ðŸ”’ Instructions secrÃ¨tes pour l'IA",
    'se.instructions_ph': "Ex : La victime est un homme de 65 ans avec des antÃ©cÃ©dents cardiaques...",
    'se.instructions_hint':"DÃ©crivez le comportement du demandeur, l'Ã©volution de l'incident, les donnÃ©es mÃ©dicales pertinentes...",
    'se.success':         'âœ“ ScÃ©nario crÃ©Ã© avec succÃ¨s',
    'se.creating':        'CrÃ©ation...',
    'se.create_btn':      '+ CrÃ©er ScÃ©nario',
    'se.clear_btn':       'Effacer',
    'se.error_required':  'Remplis tous les champs obligatoires',
    'sp.header':          'SCÃ‰NARIOS ({n})',
    'sp.empty':           'Aucun scÃ©nario crÃ©Ã©',
    'sp.confirm_delete':  'Supprimer ce scÃ©nario ?',
    'up.new_user':        'Nouvel utilisateur',
    'up.username':        "Nom d'utilisateur",
    'up.username_ph':     'Minimum 3 caractÃ¨res',
    'up.password':        'Mot de passe',
    'up.password_ph':     'Minimum 6 caractÃ¨res',
    'up.role':            'RÃ´le',
    'up.role_operator':   'OpÃ©rateur',
    'up.role_trainer':    'Formateur',
    'up.role_admin':      'Administrateur',
    'up.expiry':          "Date d'expiration (facultatif)",
    'up.create_btn':      '+ CrÃ©er Utilisateur',
    'up.users_header':    'Utilisateurs du systÃ¨me ({n})',
    'up.refresh':         'â†º Actualiser',
    'up.empty':           'Aucun utilisateur',
    'up.expired':         'ExpirÃ©',
    'up.error_username':  'Minimum 3 caractÃ¨res',
    'up.error_password':  'Minimum 6 caractÃ¨res',
    'eu.title_pre':       "Modifier l'utilisateur :",
    'eu.status':          'Ã‰tat',
    'eu.active':          'Actif',
    'eu.inactive':        'Inactif',
    'eu.expiry':          "Date d'expiration (facultatif)",
    'eu.expiry_hint':     "Laisse vide pour supprimer l'expiration",
    'eu.cancel':          'Annuler',
    'eu.saving':          'Enregistrement...',
    'eu.save':            'Sauvegarder',
  },

  en: {
    'nav.emergency':      'Emergency',
    'nav.history':        'History',
    'nav.scenarios':      'Scenarios',
    'nav.users':          'Users',
    'btn.home':           'Home',
    'btn.logout':         'Logout',
    'login.subtitle':     'Simulation system Â· Andorra',
    'login.username':     'Username',
    'login.username_ph':  'user',
    'login.password':     'Password',
    'login.submit':       'Sign in',
    'login.loading':      'Signing in...',
    'login.back':         'Back to main page',
    'login.conn_error':   'Connection error',
    'chat.no_incident':   'Select or create an incident',
    'chat.no_incident_sub': 'The caller will answer your questions',
    'chat.call_active':   'Active',
    'chat.call_ended':    'Ended',
    'chat.end_call':      'End Call',
    'chat.ending':        'â³ Ending...',
    'chat.call_finished': 'âœ“ Call ended',
    'chat.empty':         "Start a new emergency to\nbegin the simulation",
    'chat.caller_label':  'ðŸ“ž Caller',
    'chat.input_ph':      "Write the operator's message...",
    'chat.send':          'Send â†©',
    'fitxa.title':        'ðŸ“‹ Data Sheet',
    'fitxa.subtitle':     'Fill in during the call',
    'fitxa.address':      'ðŸ“ Exact address',
    'fitxa.address_ph':   'Street, number, floor...',
    'fitxa.phone':        'ðŸ“ž Contact phone',
    'fitxa.phone_ph':     '+376 ...',
    'fitxa.injured':      'ðŸš‘ Number of injured',
    'fitxa.risks':        'âš ï¸ Additional risks',
    'fitxa.notes':        'ðŸ“ Operator notes',
    'fitxa.notes_ph':     'Observations, relevant details...',
    'fitxa.save':         'ðŸ’¾ Finish and Save Intervention',
    'fitxa.saving':       'â³ Saving...',
    'fitxa.saved':        'âœ“ Intervention saved successfully',
    'fitxa.error':        'âœ— Error saving the form',
    'ep.scenario':        'Base scenario',
    'ep.free':            'â€” Free emergency â€”',
    'ep.details':         'Incident details',
    'ep.type':            'Incident type',
    'ep.location':        'Location',
    'ep.location_ph':     'Street, municipality...',
    'ep.description':     'Brief description',
    'ep.desc_ph':         'Initial details...',
    'ep.priority':        'Priority',
    'ep.start':           'ðŸš¨ Start New Emergency',
    'ep.starting':        'â³ Creating...',
    'ep.session':         'Session incidents',
    'hp.filters':         'Filters',
    'hp.all':             'All',
    'hp.search_ph':       'Search by type or scenario...',
    'hp.delete_sel':      'Delete sel. ({n})',
    'hp.delete_sel_empty':'Delete sel.',
    'hp.delete_all':      'All',
    'hp.loading':         'Loading...',
    'hp.error':           'Error loading history',
    'hp.empty':           'No interventions found',
    'hp.open_debriefing': 'ðŸ“Š Open debriefing',
    'hp.confirm_del_one': 'Delete history #{id}?',
    'hp.confirm_del_sel': 'Delete {n} history record{s}?',
    'hp.confirm_del_all': 'Delete all history ({n} record{s})?\nThis action cannot be undone.',
    'hp.alert_error':     'Error deleting history',
    'hp.plural_s':        's',
    'dm.ended':           'Ended',
    'dm.close':           'âœ• Close',
    'dm.transcript':      'ðŸ’¬ Call transcript',
    'dm.loading':         'Loading...',
    'dm.error':           'Error loading debriefing',
    'dm.no_messages':     'No messages',
    'dm.operator':        'ðŸ‘® Operator',
    'dm.caller':          'ðŸ“ž Caller',
    'dm.metrics':         'â± Metrics',
    'dm.duration':        'Total duration',
    'dm.duration_sub':    'call_start â†’ call_end',
    'dm.response':        '1st response',
    'dm.response_sub':    'until the 1st message',
    'dm.msg_count':       'Messages',
    'dm.priority':        'Priority',
    'dm.call_start':      'Call start',
    'dm.scenario':        'Base scenario',
    'dm.free_emergency':  'â€” Free emergency â€”',
    'dm.data_sheet':      'ðŸ“‹ Data Sheet',
    'dm.no_sheet':        'No sheet',
    'dm.address':         'ðŸ“ Address',
    'dm.phone':           'ðŸ“ž Phone',
    'dm.injured':         'ðŸš‘ Injured',
    'dm.risks':           'âš ï¸ Risks',
    'dm.notes':           'ðŸ“ Notes',
    'dm.saved':           'Saved:',
    'type.Incendio':          'ðŸ”¥ Fire',
    'type.Incendi forestal':  'ðŸŒ² Forest fire',
    'type.Accidente':         'ðŸš— Traffic accident',
    'type.InundaciÃ³':         'ðŸ’§ Flood',
    'type.EmergÃ¨ncia mÃ¨dica': 'ðŸ¥ Medical emergency',
    'type.Allau':             'â„ï¸ Avalanche',
    'risk.Gas':         'ðŸ”´ Gas',
    'risk.Electricitat':'âš¡ Electricity',
    'risk.QuÃ­mics':     'â˜¢ï¸ Chemicals',
    'risk.Estructural': 'ðŸ—ï¸ Structural',
    'risk.Explosius':   'ðŸ’¥ Explosives',
    'risk.Biohazard':   'ðŸ¦  Biohazard',
    'vs.Consciente':    'Conscious',
    'vs.Inconsciente':  'Unconscious',
    'vs.GASP':          'GASP',
    'ie.Calma':         'Calm',
    'ie.PÃ¡nico':        'Panic',
    'ie.AgresiÃ³n':      'Aggression',
    'role.admin':    'ðŸ”‘ Admin',
    'role.formador': 'ðŸŽ“ Trainer',
    'role.operador': 'ðŸ‘® Operator',
    'se.title':           'New simulation scenario',
    'se.subtitle':        "Define the context visible to the operator and the secret instructions that will guide the AI",
    'se.banner':          'ðŸ”’ Trainer zone Â· The AI instructions are never seen by the operator',
    'se.title_label':     'Scenario title',
    'se.title_ph':        'Ex: Fire in housing with trapped victim',
    'se.inc_type':        'Incident type',
    'se.base_loc':        'Base location',
    'se.base_loc_ph':     'Ex: Andorra la Vella',
    'se.exact_addr':      'Exact address',
    'se.exact_addr_ph':   'Ex: Main Street 15, 2nd floor',
    'se.victim':          'Victim status',
    'se.emotion':         'Initial caller emotion',
    'se.victim_stable':   'â— Stable',
    'se.victim_critical': 'â— Critical',
    'se.victim_gasp':     'â— Respiratory arrest',
    'se.emotion_calm':    'â— Cooperative',
    'se.emotion_panic':   'â— Difficult to manage',
    'se.emotion_aggr':    'â— Very difficult to manage',
    'se.instructions':    'ðŸ”’ Secret instructions for the AI',
    'se.instructions_ph': 'Ex: The victim is a 65-year-old man with cardiac history...',
    'se.instructions_hint':'Describe the caller\'s behavior, incident evolution, relevant medical data...',
    'se.success':         'âœ“ Scenario created successfully',
    'se.creating':        'Creating...',
    'se.create_btn':      '+ Create Scenario',
    'se.clear_btn':       'Clear',
    'se.error_required':  'Fill in all required fields',
    'sp.header':          'SCENARIOS ({n})',
    'sp.empty':           'No scenarios created',
    'sp.confirm_delete':  'Delete this scenario?',
    'up.new_user':        'New user',
    'up.username':        'Username',
    'up.username_ph':     'Minimum 3 characters',
    'up.password':        'Password',
    'up.password_ph':     'Minimum 6 characters',
    'up.role':            'Role',
    'up.role_operator':   'Operator',
    'up.role_trainer':    'Trainer',
    'up.role_admin':      'Administrator',
    'up.expiry':          'Expiry date (optional)',
    'up.create_btn':      '+ Create User',
    'up.users_header':    'System users ({n})',
    'up.refresh':         'â†º Refresh',
    'up.empty':           'No users',
    'up.expired':         'Expired',
    'up.error_username':  'Minimum 3 characters',
    'up.error_password':  'Minimum 6 characters',
    'eu.title_pre':       'Edit user:',
    'eu.status':          'Status',
    'eu.active':          'Active',
    'eu.inactive':        'Inactive',
    'eu.expiry':          'Expiry date (optional)',
    'eu.expiry_hint':     'Leave blank to remove expiry',
    'eu.cancel':          'Cancel',
    'eu.saving':          'Saving...',
    'eu.save':            'Save',
  },
}

// Metadades dels riscos que no canvien
const RISK_META = [
  { value: 'Gas',          accent: 'accent-orange-500' },
  { value: 'Electricitat', accent: 'accent-yellow-500' },
  { value: 'QuÃ­mics',      accent: 'accent-green-600'  },
  { value: 'Estructural',  accent: 'accent-blue-500'   },
  { value: 'Explosius',    accent: 'accent-purple-500' },
  { value: 'Biohazard',    accent: 'accent-red-600'    },
]

const INCIDENT_TYPE_VALUES = [
  'Incendio', 'Incendi forestal', 'Accidente',
  'InundaciÃ³', 'EmergÃ¨ncia mÃ¨dica', 'Allau',
]

export function useI18n() {
  function t(key, vars = {}) {
    const dict = messages[_lang.value] || messages.ca
    let str = dict[key] ?? messages.ca[key] ?? key
    for (const [k, v] of Object.entries(vars))
      str = str.replaceAll(`{${k}}`, v)
    return str
  }

  /** Retorna INCIDENT_TYPES traduÃ¯ts per a components de cara a l'usuari */
  function incidentTypes() {
    return INCIDENT_TYPE_VALUES.map(value => ({ value, label: t(`type.${value}`) }))
  }

  /** Retorna RISKS traduÃ¯ts (mantÃ© accent per a checkboxes) */
  function risks() {
    return RISK_META.map(r => ({ ...r, label: t(`risk.${r.value}`) }))
  }

  /** Plural helper: retorna el sufix plural si n != 1 */
  function plural(n) {
    return n !== 1 ? t('hp.plural_s') : ''
  }

  return { t, lang: _lang, incidentTypes, risks, plural }
}
