<!DOCTYPE html>
<html lang="ca" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DispatchSim — Plataforma de Simulació d'Emergències</title>
  <meta name="description" content="DispatchSim és la plataforma professional de simulació i formació per a professionals d'emergències d'Andorra." />
  <style>
    /* ══ TOKENS ══ */
    :root {
      --bg:         #f0f4f8;
      --surface:    #ffffff;
      --surface2:   #fafbfc;
      --surface3:   #f4f6f9;
      --border:     #e2e8f0;
      --text:       #1e2d3d;
      --text2:      #64748b;
      --text3:      #94a3b8;
      --accent:     #1565c0;
      --accent-bg:  #eff6ff;
      --accent-br:  #bfdbfe;
      --hero-bg:    linear-gradient(140deg, #1565c0 0%, #0d47a1 50%, #1a237e 100%);
      --nav-bg:     rgba(255,255,255,0.95);
      --nav-border: #e2e8f0;
      --nav-c:      #64748b;
      --nav-hover:  #1565c0;
      --footer-bg:  #0f172a;
      --footer-c:   #94a3b8;
      --footer-h:   #f1f5f9;
      --scroll:     #cbd5e1;
      --cta-bg:     linear-gradient(135deg, #1565c0, #0d47a1);
    }
    [data-theme="dark"] {
      --bg:         #0f172a;
      --surface:    #1e293b;
      --surface2:   #1a2535;
      --surface3:   #162032;
      --border:     #334155;
      --text:       #f1f5f9;
      --text2:      #94a3b8;
      --text3:      #64748b;
      --accent:     #3b82f6;
      --accent-bg:  rgba(59,130,246,.12);
      --accent-br:  rgba(59,130,246,.3);
      --hero-bg:    linear-gradient(140deg, #1e3a5f 0%, #0f172a 50%, #080e1a 100%);
      --nav-bg:     rgba(15,23,42,0.97);
      --nav-border: #334155;
      --nav-c:      #94a3b8;
      --nav-hover:  #60a5fa;
      --footer-bg:  #060d1a;
      --footer-c:   #64748b;
      --footer-h:   #e2e8f0;
      --scroll:     #334155;
      --cta-bg:     linear-gradient(135deg, #1e3a5f, #0a1428);
    }

    /* ══ RESET ══ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body { font-family: 'Segoe UI', system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; overflow-x: hidden; }
    a { text-decoration: none; color: inherit; }
    ::-webkit-scrollbar { width: 5px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--scroll); border-radius: 4px; }

    /* ══ NAV ══ */
    .nav {
      position: fixed; top: 0; left: 0; right: 0; z-index: 200;
      background: var(--nav-bg); border-bottom: 1px solid var(--nav-border);
      backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
      height: 60px; display: flex; align-items: center; padding: 0 48px; gap: 32px;
    }
    .nav-logo { display: flex; align-items: center; gap: 10px; font-size: 17px; font-weight: 700; color: var(--accent); flex-shrink: 0; letter-spacing: -.01em; }
    .nav-links { display: flex; align-items: center; gap: 2px; flex: 1; }
    .nav-link { padding: 6px 14px; font-size: 13.5px; font-weight: 500; color: var(--nav-c); border-radius: 6px; cursor: pointer; border: none; background: none; transition: color .15s, background .15s; }
    .nav-link:hover { color: var(--nav-hover); background: var(--accent-bg); }
    .nav-right { display: flex; align-items: center; gap: 10px; flex-shrink: 0; }
    .btn-theme { width: 34px; height: 34px; border: 1px solid var(--border); border-radius: 8px; background: var(--surface); color: var(--text2); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all .15s; }
    .btn-theme:hover { border-color: var(--accent); color: var(--accent); }
    .btn-nav-cta { padding: 8px 20px; background: var(--accent); color: #fff; border: none; border-radius: 8px; font-size: 13.5px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 7px; transition: opacity .15s, transform .1s; }
    .btn-nav-cta:hover { opacity: .9; transform: translateY(-1px); }

    /* ══ HERO ══ */
    .hero {
      background: var(--hero-bg); min-height: 90vh;
      display: flex; align-items: center; justify-content: center;
      padding: 120px 48px 88px; position: relative; overflow: hidden; text-align: center;
    }
    .hero::before {
      content: ''; position: absolute; inset: 0; pointer-events: none;
      background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }
    .hero-inner { max-width: 860px; position: relative; z-index: 1; }
    .hero-badge { display: inline-flex; align-items: center; gap: 8px; padding: 5px 16px; background: rgba(255,255,255,.12); border: 1px solid rgba(255,255,255,.2); border-radius: 24px; font-size: 11.5px; font-weight: 600; color: rgba(255,255,255,.85); letter-spacing: .7px; text-transform: uppercase; margin-bottom: 32px; }
    .badge-dot { width: 7px; height: 7px; background: #4ade80; border-radius: 50%; box-shadow: 0 0 0 3px rgba(74,222,128,.25); animation: pulse 2s infinite; }
    @keyframes pulse { 0%,100% { box-shadow: 0 0 0 3px rgba(74,222,128,.25); } 50% { box-shadow: 0 0 0 6px rgba(74,222,128,.1); } }
    .hero h1 { font-size: clamp(2.4rem,5.5vw,3.8rem); font-weight: 800; color: #fff; line-height: 1.12; letter-spacing: -.025em; margin-bottom: 20px; }
    .hero h1 em { font-style: normal; background: linear-gradient(90deg,#90caf9,#e3f2fd); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .hero p { font-size: clamp(1rem,2vw,1.2rem); color: rgba(255,255,255,.7); max-width: 600px; margin: 0 auto 40px; line-height: 1.75; }
    .hero-actions { display: flex; align-items: center; justify-content: center; gap: 14px; flex-wrap: wrap; }
    .btn-hero-primary { padding: 14px 36px; background: #fff; color: #1565c0; border: none; border-radius: 10px; font-size: 15px; font-weight: 700; cursor: pointer; display: inline-flex; align-items: center; gap: 8px; box-shadow: 0 4px 24px rgba(0,0,0,.22); transition: transform .15s, box-shadow .15s; }
    .btn-hero-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 32px rgba(0,0,0,.32); }
    .btn-hero-ghost { padding: 14px 28px; background: rgba(255,255,255,.1); color: #fff; border: 1px solid rgba(255,255,255,.25); border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer; display: inline-flex; align-items: center; gap: 8px; transition: background .15s; backdrop-filter: blur(6px); }
    .btn-hero-ghost:hover { background: rgba(255,255,255,.18); }

    /* ══ SHARED SECTION ══ */
    .section { padding: 88px 48px; }
    .section-alt { background: var(--surface); }
    .section-inner { max-width: 1100px; margin: 0 auto; }
    .section-center { text-align: center; }
    .section-header { margin-bottom: 56px; }
    .section-header.center { text-align: center; }
    .section-header.center p { margin-left: auto; margin-right: auto; }
    .section-header h2 { font-size: clamp(1.6rem,3vw,2.3rem); font-weight: 800; color: var(--text); letter-spacing: -.02em; line-height: 1.2; margin-bottom: 12px; }
    .section-header p { font-size: 1.05rem; color: var(--text2); max-width: 560px; line-height: 1.75; }
    .label-tag { display: inline-flex; align-items: center; gap: 6px; padding: 4px 12px; background: var(--accent-bg); border: 1px solid var(--accent-br); border-radius: 20px; font-size: 11px; font-weight: 700; color: var(--accent); letter-spacing: .7px; text-transform: uppercase; margin-bottom: 14px; }

    /* ══ WHAT IS ══ */
    .what-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 72px; align-items: center; }
    @media (max-width: 860px) { .what-grid { grid-template-columns: 1fr; gap: 40px; } }
    .what-text p { font-size: 1rem; color: var(--text2); line-height: 1.8; margin-bottom: 16px; }
    .what-text p:last-child { margin-bottom: 0; }
    .what-text strong { color: var(--text); font-weight: 600; }
    .what-points { display: flex; flex-direction: column; gap: 18px; margin-top: 32px; }
    .what-point { display: flex; gap: 14px; align-items: flex-start; }
    .what-point-icon { width: 38px; height: 38px; flex-shrink: 0; background: var(--accent-bg); border: 1px solid var(--accent-br); border-radius: 9px; display: flex; align-items: center; justify-content: center; color: var(--accent); }
    .what-point-text h4 { font-size: 14px; font-weight: 700; color: var(--text); margin-bottom: 3px; }
    .what-point-text p { font-size: 13px; color: var(--text2); line-height: 1.6; margin: 0; }

    /* visual mock */
    .mock-window { background: var(--surface); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; box-shadow: 0 8px 40px rgba(0,0,0,.1); }
    [data-theme="dark"] .mock-window { box-shadow: 0 8px 40px rgba(0,0,0,.4); }
    .mock-titlebar { background: var(--surface2); border-bottom: 1px solid var(--border); padding: 10px 16px; display: flex; align-items: center; gap: 8px; }
    .mock-dot { width: 10px; height: 10px; border-radius: 50%; }
    .mock-titlebar-label { margin-left: 8px; font-size: 11px; font-weight: 600; color: var(--text3); letter-spacing: .4px; }
    .mock-body { padding: 20px; display: flex; flex-direction: column; gap: 14px; }
    .mock-card { background: var(--surface2); border: 1px solid var(--border); border-radius: 10px; padding: 14px; }
    .mock-card-label { font-size: 10px; font-weight: 700; color: var(--text3); text-transform: uppercase; letter-spacing: .6px; margin-bottom: 8px; }
    .mock-bar { height: 8px; border-radius: 4px; background: var(--accent-br); margin-bottom: 6px; }
    .mock-bar.accent { background: var(--accent); opacity: .5; }
    .mock-bar.w90 { width: 90%; }
    .mock-bar.w70 { width: 70%; }
    .mock-bar.w50 { width: 50%; }
    .mock-chat { display: flex; flex-direction: column; gap: 8px; }
    .mock-bubble-out { background: var(--accent); color: #fff; border-radius: 10px 10px 2px 10px; padding: 8px 12px; font-size: 12px; align-self: flex-end; max-width: 85%; }
    .mock-bubble-in  { background: var(--bg); border: 1px solid var(--border); color: var(--text); border-radius: 10px 10px 10px 2px; padding: 8px 12px; font-size: 12px; align-self: flex-start; max-width: 85%; }
    .mock-status-row { display: flex; gap: 10px; }
    .mock-stat { flex: 1; background: var(--surface2); border: 1px solid var(--border); border-radius: 8px; padding: 10px 12px; }
    .mock-stat-val { font-size: 18px; font-weight: 800; color: var(--accent); line-height: 1; }
    .mock-stat-label { font-size: 10px; color: var(--text3); margin-top: 3px; }

    /* ══ FEATURES ══ */
    .features-grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(300px,1fr)); gap: 20px; }
    .feature-card { background: var(--surface3); border: 1px solid var(--border); border-radius: 12px; padding: 28px; transition: border-color .2s, box-shadow .2s, transform .2s; }
    .section-alt .feature-card { background: var(--surface); }
    [data-theme="dark"] .section-alt .feature-card { background: var(--surface3); }
    .feature-card:hover { border-color: var(--accent-br); box-shadow: 0 4px 22px rgba(21,101,192,.08); transform: translateY(-2px); }
    .feature-icon { width: 46px; height: 46px; background: var(--accent-bg); border: 1px solid var(--accent-br); border-radius: 11px; display: flex; align-items: center; justify-content: center; color: var(--accent); margin-bottom: 18px; }
    .feature-card h3 { font-size: 15px; font-weight: 700; color: var(--text); margin-bottom: 8px; }
    .feature-card p { font-size: 13px; color: var(--text2); line-height: 1.7; }

    /* ══ STEPS ══ */
    .steps-row { display: grid; grid-template-columns: repeat(4,1fr); gap: 0; position: relative; }
    @media (max-width: 720px) { .steps-row { grid-template-columns: 1fr 1fr; } }
    .steps-row::before { content: ''; position: absolute; top: 23px; left: calc(12.5% + 2px); right: calc(12.5% + 2px); height: 2px; background: var(--accent-br); z-index: 0; }
    @media (max-width: 720px) { .steps-row::before { display: none; } }
    .step { display: flex; flex-direction: column; align-items: center; text-align: center; padding: 0 20px 0; }
    .step-num { width: 48px; height: 48px; background: var(--accent-bg); border: 2px solid var(--accent-br); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 17px; font-weight: 800; color: var(--accent); margin-bottom: 20px; position: relative; z-index: 1; flex-shrink: 0; }
    .step h3 { font-size: 14.5px; font-weight: 700; color: var(--text); margin-bottom: 8px; }
    .step p { font-size: 13px; color: var(--text2); line-height: 1.65; }

    /* ══ OBJECTIVES ══ */
    .obj-grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(300px,1fr)); gap: 20px; }
    .obj-card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 30px; position: relative; overflow: hidden; transition: border-color .2s, box-shadow .2s; }
    .obj-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; border-radius: 12px 12px 0 0; }
    .obj-card.blue::before  { background: linear-gradient(90deg,#1565c0,#1976d2); }
    .obj-card.teal::before  { background: linear-gradient(90deg,#0097a7,#00bcd4); }
    .obj-card.green::before { background: linear-gradient(90deg,#2e7d32,#43a047); }
    .obj-card:hover { border-color: var(--accent-br); box-shadow: 0 6px 24px rgba(0,0,0,.06); }
    .obj-icon { width: 44px; height: 44px; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 18px; }
    .obj-card.blue  .obj-icon { background: #eff6ff; color: #1565c0; }
    .obj-card.teal  .obj-icon { background: #e0f7fa; color: #0097a7; }
    .obj-card.green .obj-icon { background: #e8f5e9; color: #2e7d32; }
    [data-theme="dark"] .obj-card.blue  .obj-icon { background: rgba(21,101,192,.2); color: #60a5fa; }
    [data-theme="dark"] .obj-card.teal  .obj-icon { background: rgba(0,151,167,.2); color: #4dd0e1; }
    [data-theme="dark"] .obj-card.green .obj-icon { background: rgba(46,125,50,.2);  color: #66bb6a; }
    .obj-card h3 { font-size: 15.5px; font-weight: 700; color: var(--text); margin-bottom: 10px; }
    .obj-card p  { font-size: 13px; color: var(--text2); line-height: 1.7; }
    .obj-list { list-style: none; margin-top: 14px; display: flex; flex-direction: column; gap: 7px; }
    .obj-list li { font-size: 12.5px; color: var(--text2); display: flex; align-items: flex-start; gap: 8px; }
    .obj-list li::before { content: '✓'; color: var(--accent); font-weight: 700; flex-shrink: 0; }

    /* ══ CTA BAND ══ */
    .cta-band { background: var(--cta-bg); padding: 80px 48px; text-align: center; }
    .cta-band h2 { font-size: clamp(1.6rem,3vw,2.2rem); font-weight: 800; color: #fff; letter-spacing: -.02em; margin-bottom: 14px; }
    .cta-band p { font-size: 1.05rem; color: rgba(255,255,255,.7); max-width: 480px; margin: 0 auto 36px; line-height: 1.75; }
    .btn-cta-band { padding: 14px 36px; background: #fff; color: #1565c0; border: none; border-radius: 10px; font-size: 15px; font-weight: 700; cursor: pointer; display: inline-flex; align-items: center; gap: 8px; box-shadow: 0 4px 20px rgba(0,0,0,.2); transition: transform .15s, box-shadow .15s; }
    .btn-cta-band:hover { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(0,0,0,.3); }

    /* ══ FOOTER ══ */
    footer { background: var(--footer-bg); padding: 56px 48px 28px; }
    .footer-inner { max-width: 1100px; margin: 0 auto; }
    .footer-top { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 48px; padding-bottom: 40px; border-bottom: 1px solid rgba(255,255,255,.06); margin-bottom: 24px; }
    @media (max-width: 860px) { .footer-top { grid-template-columns: 1fr 1fr; } .footer-brand { grid-column: 1/-1; } }
    .footer-logo { display: flex; align-items: center; gap: 10px; font-size: 17px; font-weight: 700; color: #60a5fa; margin-bottom: 12px; letter-spacing: -.01em; }
    .footer-desc { font-size: 13px; color: var(--footer-c); max-width: 280px; line-height: 1.65; }
    .footer-col h4 { font-size: 11px; font-weight: 700; color: var(--footer-h); letter-spacing: .8px; text-transform: uppercase; margin-bottom: 14px; }
    .footer-col ul { list-style: none; display: flex; flex-direction: column; gap: 9px; }
    .footer-col ul li a,
    .footer-col ul li button { font-size: 13px; color: var(--footer-c); transition: color .15s; background: none; border: none; padding: 0; cursor: pointer; font-family: inherit; text-align: left; }
    .footer-col ul li a:hover,
    .footer-col ul li button:hover { color: #60a5fa; }
    .footer-bottom { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px; }
    .footer-copy { font-size: 12px; color: var(--footer-c); }
    .footer-links { display: flex; gap: 20px; }
    .footer-links button { font-size: 12px; color: var(--footer-c); background: none; border: none; cursor: pointer; font-family: inherit; transition: color .15s; }
    .footer-links button:hover { color: #60a5fa; }

    /* ══ MODAL ══ */
    .modal-overlay { display: none; position: fixed; inset: 0; z-index: 500; background: rgba(0,0,0,.5); backdrop-filter: blur(4px); align-items: center; justify-content: center; padding: 24px; }
    .modal-overlay.open { display: flex; }
    .modal { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; width: 100%; max-width: 600px; max-height: 80vh; display: flex; flex-direction: column; box-shadow: 0 24px 64px rgba(0,0,0,.25); }
    .modal-header { display: flex; align-items: center; justify-content: space-between; padding: 20px 24px; border-bottom: 1px solid var(--border); flex-shrink: 0; }
    .modal-header h3 { font-size: 16px; font-weight: 700; color: var(--text); }
    .modal-close { width: 32px; height: 32px; border: none; background: transparent; color: var(--text2); cursor: pointer; border-radius: 8px; display: flex; align-items: center; justify-content: center; transition: background .15s; }
    .modal-close:hover { background: var(--surface3); }
    .modal-body { padding: 24px; overflow-y: auto; font-size: 13.5px; color: var(--text2); line-height: 1.8; }
    .modal-body h4 { font-size: 12.5px; font-weight: 700; color: var(--text); text-transform: uppercase; letter-spacing: .05em; margin: 22px 0 8px; }
    .modal-body h4:first-child { margin-top: 0; }
    .modal-body p { margin-bottom: 10px; }
    .modal-body ul { padding-left: 18px; margin-bottom: 10px; }
    .modal-body ul li { margin-bottom: 5px; }
    .modal-meta { margin-top: 20px; font-size: 11.5px; color: var(--text3); }

    /* ══ RESPONSIVE ══ */
    @media (max-width: 640px) {
      .nav-links { display: none; }
      .nav { padding: 0 20px; }
      .hero, .section, .cta-band, footer { padding-left: 20px; padding-right: 20px; }
      .steps-row { grid-template-columns: 1fr 1fr; gap: 24px; }
    }
  </style>
</head>
<body>

  <!-- ══ NAV ══ -->
  <nav class="nav">
    <div class="nav-logo" onclick="window.scrollTo({top:0,behavior:'smooth'})" style="cursor:pointer">
      <svg width="26" height="26" viewBox="0 0 28 28" fill="none">
        <path d="M14 2L4 6.5V13.5C4 19.2 8.4 24.6 14 26C19.6 24.6 24 19.2 24 13.5V6.5L14 2Z" fill="currentColor" opacity=".18"/>
        <path d="M14 2L4 6.5V13.5C4 19.2 8.4 24.6 14 26C19.6 24.6 24 19.2 24 13.5V6.5L14 2Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
        <circle cx="14" cy="14" r="2.8" fill="currentColor"/>
        <path d="M8.5 14h3M16.5 14h3M14 8.5v3M14 16.5v3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      DispatchSim
    </div>
    <div class="nav-links">
      <button class="nav-link" onclick="goTo('what')">Què és</button>
      <button class="nav-link" onclick="goTo('features')">Característiques</button>
      <button class="nav-link" onclick="goTo('how')">Com funciona</button>
      <button class="nav-link" onclick="goTo('objectives')">Objectius</button>
    </div>
    <div class="nav-right">
      <button class="btn-theme" onclick="toggleTheme()" aria-label="Canviar tema">
        <svg id="icon-moon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
        <svg id="icon-sun" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" style="display:none">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
      </button>
      <button class="btn-nav-cta" onclick="window.location.href='/app'">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
          <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M3 12h12"/>
        </svg>
        Accedir
      </button>
    </div>
  </nav>

  <!-- ══ HERO ══ -->
  <section class="hero">
    <div class="hero-inner">
      <div class="hero-badge"><div class="badge-dot"></div>Plataforma activa · Andorra</div>
      <h1>La plataforma de simulació<br>d'<em>emergències per a professionals</em></h1>
      <p>DispatchSim replica l'entorn operatiu d'una central de coordinació d'emergències. Orientada a la formació inicial i al reciclatge del personal en actiu, amb escenaris de dificultat progressiva adaptats al nivell de competència de cada operador.</p>
      <div class="hero-actions">
        <button class="btn-hero-primary" onclick="window.location.href='/app'">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>
          Accedir a la plataforma
        </button>
        <button class="btn-hero-ghost" onclick="goTo('what')">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
          Més informació
        </button>
      </div>
    </div>
  </section>

  <!-- ══ WHAT IS DISPATCHSIM ══ -->
  <section class="section section-alt" id="what">
    <div class="section-inner">
      <div class="what-grid">
        <div class="what-text">
          <div class="label-tag">
            <svg width="11" height="11" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
            Sobre la plataforma
          </div>
          <h2 style="font-size:clamp(1.6rem,3vw,2.3rem);font-weight:800;color:var(--text);letter-spacing:-.02em;line-height:1.2;margin-bottom:16px;">Què és DispatchSim?</h2>
          <p>
            <strong>DispatchSim</strong> és una plataforma web de simulació d'emergències dissenyada per a la <strong>formació i avaluació d'operadors</strong> de centrals de coordinació. Cobreix dos perfils: el personal de nova incorporació i el que ja es troba en actiu i requereix mantenir o actualitzar les seves competències.
          </p>
          <p>
            A diferència d'un manual o d'una formació teòrica, DispatchSim situa l'operador davant d'una <strong>trucada simulada en temps real</strong>: una víctima generada per intel·ligència artificial que respon, evoluciona i reacciona en funció de les decisions preses. Cada simulació és única i requereix l'aplicació estricta del protocol operatiu.
          </p>
          <p>
            Els escenaris s'estructuren en <strong>diferents nivells de dificultat</strong> — des de situacions bàsiques fins a incidents complexos amb múltiples variables simultànies — de manera que la formació progressa gradualment i s'adapta al nivell de cada operador. En finalitzar la sessió, la plataforma genera automàticament un <strong>informe de debriefing</strong> amb tots els indicadors de rendiment.
          </p>
          <div class="what-points">
            <div class="what-point">
              <div class="what-point-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
              </div>
              <div class="what-point-text">
                <h4>Adaptat al context local</h4>
                <p>Dissenyat per a Andorra, amb escenaris que reflecteixen la realitat geogràfica, operativa i lingüística del territori.</p>
              </div>
            </div>
            <div class="what-point">
              <div class="what-point-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8M12 17v4"/></svg>
              </div>
              <div class="what-point-text">
                <h4>Dissenyada per a estació de treball</h4>
                <p>Aplicació web optimitzada per a ordinador d'escriptori o portàtil. No requereix instal·lació. L'ús en dispositius mòbils no està contemplat, ja que la plataforma replica un entorn de treball real.</p>
              </div>
            </div>
            <div class="what-point">
              <div class="what-point-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
              </div>
              <div class="what-point-text">
                <h4>Entorn segur i controlat</h4>
                <p>Totes les dades es processen localment. Cap informació surt del sistema. L'accés és restringit per rols i autenticació.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Visual mock -->
        <div>
          <div class="mock-window">
            <div class="mock-titlebar">
              <div class="mock-dot" style="background:#ef4444"></div>
              <div class="mock-dot" style="background:#f59e0b"></div>
              <div class="mock-dot" style="background:#22c55e"></div>
              <span class="mock-titlebar-label">DispatchSim · Simulació activa</span>
            </div>
            <div class="mock-body">
              <div class="mock-card">
                <div class="mock-card-label">Incident #0312 · En curs</div>
                <div class="mock-bar accent w90"></div>
                <div class="mock-bar w70"></div>
                <div style="display:flex;align-items:center;gap:8px;margin-top:6px;">
                  <div style="width:8px;height:8px;border-radius:50%;background:#22c55e;flex-shrink:0"></div>
                  <span style="font-size:12px;color:var(--text2)">Operador assignat · Temps actiu: 02:47</span>
                </div>
              </div>
              <div class="mock-card">
                <div class="mock-card-label">Conversació en temps real</div>
                <div class="mock-chat">
                  <div class="mock-bubble-out">Servei d'emergències, digui'm.</div>
                  <div class="mock-bubble-in">Necessito ajuda! Hi ha hagut un accident a la carretera...</div>
                  <div class="mock-bubble-out">Digui'm, on és exactament? Hi ha ferits?</div>
                  <div class="mock-bubble-in">Sí, un conductor inconscient. Som a la CG-2 km 14...</div>
                </div>
              </div>
              <div class="mock-status-row">
                <div class="mock-stat">
                  <div class="mock-stat-val">02:47</div>
                  <div class="mock-stat-label">Temps d'atenció</div>
                </div>
                <div class="mock-stat">
                  <div class="mock-stat-val" style="color:#22c55e">Actiu</div>
                  <div class="mock-stat-label">Estat incident</div>
                </div>
                <div class="mock-stat">
                  <div class="mock-stat-val">4/6</div>
                  <div class="mock-stat-label">Dades recollides</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ══ FEATURES ══ -->
  <section class="section" id="features">
    <div class="section-inner">
      <div class="section-header center">
        <div class="label-tag">
          <svg width="11" height="11" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
          Característiques
        </div>
        <h2>Funcionalitats de la plataforma</h2>
        <p>DispatchSim cobreix el cicle complet de formació: des del disseny de l'escenari fins a l'avaluació final de l'operador.</p>
      </div>
      <div class="features-grid">

        <div class="feature-card">
          <div class="feature-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
              <rect x="3" y="3" width="18" height="18" rx="2"/><path d="M9 9h6M9 12h6M9 15h4"/>
            </svg>
          </div>
          <h3>Escenaris amb nivells de dificultat</h3>
          <p>El formador configura escenaris d'entrenament adaptats a cada etapa formativa: des d'incidents simples per al personal de nova incorporació fins a situacions complexes amb múltiples variables per al personal amb experiència. Cada escenari és configurable, independent i reutilitzable.</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
          </div>
          <h3>Víctima simulada per IA</h3>
          <p>La intel·ligència artificial actua com a víctima durant la trucada: respon de forma coherent, evoluciona l'estat clínic i adapta les respostes en temps real en funció de les preguntes i decisions de l'operador.</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07A19.5 19.5 0 0 1 4.69 11 19.79 19.79 0 0 1 1.58 2.45 2 2 0 0 1 3.55.27h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L7.91 7.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 14.92z"/>
            </svg>
          </div>
          <h3>Gestió d'incidents en temps real</h3>
          <p>Mentre la trucada és activa, l'operador omple el formulari d'intervenció: dades de la víctima, localització, tipus d'incident, recursos assignats i notes addicionals. Tot queda registrat automàticament.</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
          </div>
          <h3>Avaluació i debriefing automàtic</h3>
          <p>En finalitzar cada simulació, la plataforma genera un informe de debriefing complet: temps de resposta, informació recollida, decisions preses, encerts, errors i recomanacions de millora personalitzades.</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
          </div>
          <h3>Control d'accés per rols</h3>
          <p>Tres rols diferenciats: administradors que gestionen la plataforma i els usuaris, formadors que creen i assignen escenaris, i operadors que executen les simulacions. Cada rol té el seu espai de treball.</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
              <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
            </svg>
          </div>
          <h3>Historial complet d'intervencions</h3>
          <p>Totes les simulacions queden enregistrades i consultables: conversa completa, formulari d'intervenció, temps de resposta i informe de debriefing associat. Base de dades per a l'anàlisi de rendiment a llarg termini.</p>
        </div>

      </div>
    </div>
  </section>

  <!-- ══ HOW IT WORKS ══ -->
  <section class="section section-alt" id="how">
    <div class="section-inner">
      <div class="section-header center">
        <div class="label-tag">
          <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          Com funciona
        </div>
        <h2>Del disseny a l'avaluació en 4 passos</h2>
        <p>DispatchSim replica el cicle complet de formació: planificació, execució, documentació i revisió.</p>
      </div>
      <div class="steps-row">
        <div class="step">
          <div class="step-num">1</div>
          <h3>Dissenya l'escenari</h3>
          <p>El formador configura el tipus d'emergència, la dificultat, els recursos disponibles i les instruccions específiques que guiaran la sessió.</p>
        </div>
        <div class="step">
          <div class="step-num">2</div>
          <h3>Inicia la simulació</h3>
          <p>L'operador activa la trucada. La IA assumeix el rol de la víctima i inicia la interacció amb respostes realistes i adaptades a l'escenari configurat.</p>
        </div>
        <div class="step">
          <div class="step-num">3</div>
          <h3>Gestiona la intervenció</h3>
          <p>Mentre conversa, l'operador omple el formulari d'intervenció: dades de la víctima, localització, recursos assignats i totes les accions documentades.</p>
        </div>
        <div class="step">
          <div class="step-num">4</div>
          <h3>Revisa el debriefing</h3>
          <p>La plataforma genera l'informe automàtic amb els indicadors de rendiment, les decisions preses i les recomanacions de millora per a cada operador.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ══ OBJECTIVES ══ -->
  <section class="section" id="objectives">
    <div class="section-inner">
      <div class="section-header center">
        <div class="label-tag">
          <svg width="11" height="11" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="4" fill="currentColor"/></svg>
          Objectius
        </div>
        <h2>Àmbit d'aplicació</h2>
        <p>Plataforma dissenyada per cobrir les necessitats de formació dels serveis d'emergències, des de la incorporació de nou personal fins al reciclatge de l'equip en actiu.</p>
      </div>
      <div class="obj-grid">

        <div class="obj-card blue">
          <div class="obj-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
            </svg>
          </div>
          <h3>Formació inicial i reciclatge continu</h3>
          <p>La plataforma s'adapta a qualsevol etapa formativa: des de la incorporació inicial d'un nou operador fins al reciclatge del personal amb experiència que requereix actualització de protocols o exposició a situacions inèdites.</p>
          <ul class="obj-list">
            <li>Incorporació i formació del personal de nova entrada</li>
            <li>Reciclatge i actualització del personal en actiu</li>
            <li>Nivells de dificultat progressius: bàsic, intermedi i avançat</li>
            <li>Escenaris reutilitzables i ampliables per l'equip formatiu</li>
          </ul>
        </div>

        <div class="obj-card teal">
          <div class="obj-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
          </div>
          <h3>Avaluació de competències</h3>
          <p>La plataforma permet avaluar objectivament les competències de cada operador: temps de resposta, qualitat de la informació recollida, encert en les decisions i gestió de la pressió en situacions crítiques.</p>
          <ul class="obj-list">
            <li>Indicadors de rendiment per operador</li>
            <li>Informes de debriefing automatitzats</li>
            <li>Seguiment de la progressió al llarg del temps</li>
          </ul>
        </div>

        <div class="obj-card green">
          <div class="obj-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
              <line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/>
            </svg>
          </div>
          <h3>Millora contínua del servei</h3>
          <p>Identificar patrons de resposta, analitzar les intervencions registrades i ajustar els protocols operatius per maximitzar l'eficàcia col·lectiva de l'equip.</p>
          <ul class="obj-list">
            <li>Anàlisi agregada de les intervencions</li>
            <li>Detecció de punts febles recurrents</li>
            <li>Base d'escenaris ampliable i reutilitzable</li>
          </ul>
        </div>

      </div>
    </div>
  </section>

  <!-- ══ CTA ══ -->
  <div class="cta-band">
    <h2>Formació, reciclatge i avaluació del personal</h2>
    <p>DispatchSim ofereix l'entorn de simulació necessari per a la incorporació de nou personal i l'actualització del que ja està en actiu, amb escenaris adaptats a cada nivell de competència.</p>
    <button class="btn-cta-band" onclick="window.location.href='/app'">
      <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M3 12h12"/>
      </svg>
      Accedir a l'aplicació
    </button>
  </div>

  <!-- ══ FOOTER ══ -->
  <footer>
    <div class="footer-inner">
      <div class="footer-top">
        <div class="footer-brand">
          <div class="footer-logo">
            <svg width="20" height="20" viewBox="0 0 28 28" fill="none">
              <path d="M14 2L4 6.5V13.5C4 19.2 8.4 24.6 14 26C19.6 24.6 24 19.2 24 13.5V6.5L14 2Z" fill="currentColor" opacity=".25"/>
              <path d="M14 2L4 6.5V13.5C4 19.2 8.4 24.6 14 26C19.6 24.6 24 19.2 24 13.5V6.5L14 2Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
              <circle cx="14" cy="14" r="2.5" fill="currentColor"/>
              <path d="M8.5 14h3M16.5 14h3M14 8.5v3M14 16.5v3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            DispatchSim
          </div>
          <p class="footer-desc">Plataforma professional de simulació i formació per a professionals d'emergències del Principat d'Andorra.</p>
        </div>

        <div class="footer-col">
          <h4>Plataforma</h4>
          <ul>
            <li><a href="/app">Accedir a l'aplicació</a></li>
            <li><a href="#what">Què és DispatchSim</a></li>
            <li><a href="#features">Característiques</a></li>
            <li><a href="#how">Com funciona</a></li>
            <li><a href="#objectives">Objectius</a></li>
          </ul>
        </div>

<div class="footer-col">
          <h4>Legal</h4>
          <ul>
            <li><button onclick="openModal('modal-privacy')">Política de privacitat</button></li>
            <li><button onclick="openModal('modal-terms')">Termes d'ús</button></li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <span class="footer-copy">© 2025 DispatchSim · Principat d'Andorra · Tots els drets reservats</span>
        <div class="footer-links">
          <button onclick="openModal('modal-privacy')">Privacitat</button>
          <button onclick="openModal('modal-terms')">Termes d'ús</button>
        </div>
      </div>
    </div>
  </footer>

  <!-- ══ MODAL: Política de privacitat ══ -->
  <div class="modal-overlay" id="modal-privacy" onclick="closeOnOverlay(event,'modal-privacy')">
    <div class="modal">
      <div class="modal-header">
        <h3>Política de privacitat</h3>
        <button class="modal-close" onclick="closeModal('modal-privacy')">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <h4>1. Responsable del tractament</h4>
        <p>La plataforma DispatchSim és operada pel Principat d'Andorra com a eina interna de formació i simulació per a professionals dels serveis d'emergències.</p>
        <h4>2. Dades que es recullen</h4>
        <p>Es processen exclusivament les dades mínimes necessàries per al funcionament de la plataforma:</p>
        <ul>
          <li>Credencials d'accés (nom d'usuari i contrasenya xifrada)</li>
          <li>Registres de les sessions de simulació realitzades</li>
          <li>Informació introduïda durant les intervencions simulades</li>
        </ul>
        <h4>3. Finalitat del tractament</h4>
        <p>Les dades es tracten exclusivament per a les finalitats formatives de la plataforma: gestió d'usuaris, registre d'activitat, avaluació del rendiment i millora dels protocols de formació. No es fan servir per a cap altra finalitat ni es cedeixen a tercers.</p>
        <h4>4. Conservació de les dades</h4>
        <p>Les dades es conserven durant el període en què l'usuari tingui el compte actiu. Un cop es procedeixi a la baixa, les dades seran eliminades en un termini màxim de 30 dies.</p>
        <h4>5. Seguretat</h4>
        <p>La plataforma opera en un entorn local i controlat. Les contrasenyes s'emmagatzemen xifrades. L'accés a la informació és restringit per rols i requereix autenticació en cada sessió.</p>
        <h4>6. Drets dels usuaris</h4>
        <p>Els usuaris poden sol·licitar l'accés, la rectificació o l'eliminació de les seves dades posant-se en contacte amb l'administrador de la plataforma.</p>
        <p class="modal-meta">Última actualització: gener de 2025</p>
      </div>
    </div>
  </div>

  <!-- ══ MODAL: Termes d'ús ══ -->
  <div class="modal-overlay" id="modal-terms" onclick="closeOnOverlay(event,'modal-terms')">
    <div class="modal">
      <div class="modal-header">
        <h3>Termes d'ús</h3>
        <button class="modal-close" onclick="closeModal('modal-terms')">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <h4>1. Objecte i àmbit d'aplicació</h4>
        <p>DispatchSim és una plataforma d'ús intern per a la formació i simulació de situacions d'emergència. L'accés és restringit al personal autoritzat pels serveis d'emergències del Principat d'Andorra.</p>
        <h4>2. Condicions d'accés</h4>
        <p>Cal disposar de credencials vàlides proporcionades per l'administrador del sistema. Queda prohibit:</p>
        <ul>
          <li>Compartir les credencials d'accés amb terceres persones</li>
          <li>Intentar accedir a funcions o dades per sobre del rol assignat</li>
          <li>Fer un ús de la plataforma aliè a les finalitats formatives</li>
        </ul>
        <h4>3. Ús correcte de la plataforma</h4>
        <p>DispatchSim ha de ser utilitzada exclusivament com a eina de formació. Els escenaris i les dades introduïdes durant les sessions són de caràcter fictici i no han de contenir informació personal real de víctimes ni de tercers.</p>
        <h4>4. Responsabilitats</h4>
        <p>Cada usuari és responsable de les accions realitzades amb les seves credencials. L'administrador pot suspendre o eliminar comptes que incompleixin les presents condicions d'ús.</p>
        <h4>5. Propietat intel·lectual</h4>
        <p>El codi, el disseny i els continguts de la plataforma DispatchSim són propietat del Principat d'Andorra. Queda prohibida la seva reproducció, distribució o modificació sense autorització expressa.</p>
        <h4>6. Disponibilitat del servei</h4>
        <p>La plataforma es facilita per a ús intern. L'equip tècnic no garanteix una disponibilitat ininterrompuda i es reserva el dret de realitzar manteniments o actualitzacions sense previ avís.</p>
        <p class="modal-meta">Última actualització: gener de 2025</p>
      </div>
    </div>
  </div>

  <script>
    /* ── Theme ── */
    function applyTheme(t) {
      document.documentElement.setAttribute('data-theme', t);
      document.getElementById('icon-moon').style.display = t === 'light' ? '' : 'none';
      document.getElementById('icon-sun').style.display  = t === 'dark'  ? '' : 'none';
      localStorage.setItem('dispatch_theme', t);
    }
    function toggleTheme() {
      applyTheme(document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
    }
    applyTheme(localStorage.getItem('dispatch_theme') || 'light');

    /* ── Scroll ── */
    function goTo(id) {
      const el = document.getElementById(id);
      if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    /* ── Nav shadow ── */
    const nav = document.querySelector('.nav');
    window.addEventListener('scroll', () => {
      nav.style.boxShadow = window.scrollY > 20 ? '0 2px 16px rgba(0,0,0,.08)' : 'none';
    });

    /* ── Modals ── */
    function openModal(id) {
      document.getElementById(id).classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    function closeModal(id) {
      document.getElementById(id).classList.remove('open');
      document.body.style.overflow = '';
    }
    function closeOnOverlay(e, id) {
      if (e.target === e.currentTarget) closeModal(id);
    }
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        document.querySelectorAll('.modal-overlay.open').forEach(m => {
          m.classList.remove('open');
          document.body.style.overflow = '';
        });
      }
    });
  </script>
</body>
</html>
